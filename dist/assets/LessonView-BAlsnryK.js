import{_ as $,u as A,k as T,e as j,r as a,m as B,n as I,f as M,g as m,o as z,c as O,a as s,w as R,v as q,h as u,i as d,q as w,d as C,t as S,b as E,p as F,j as U}from"./index-B-03LEUy.js";const k=r=>(F("data-v-2578d388"),r=r(),U(),r),G={class:"container"},H=k(()=>s("h3",{class:"p-2"}," Lessons Views ",-1)),J={class:"form-group"},K=k(()=>s("hr",null,null,-1)),Q=["onClick"],W={__name:"LessonView",setup(r){const V=A().token;T();const _=j(),n=a([]),p=a(0),c=a(!1),f=a("vote_count"),h=a("desc"),x=a("desc");let b=a(1),g=a(6);a(0);const l=a("");a([]);const i=async()=>{const t=[`search=${l.value}`,`perPage=${g.value}`,`page=${b.value}`].join("&");c.value=!0,await fetch(`/api/lessons/all?${t}`,{headers:{Authorization:`Bearer ${V}`}}).then(async e=>await e.json()).then(e=>{console.log(e),n.value=e.lessons,p.value=e.size,c.value=!1}).catch(e=>{throw n.value=[],p.value=0,c.value=!1,e})},y=(t,e)=>{f.value=t,h.value=e,i()},L=B(()=>(console.log("DATA:",n.value),l.value?n.value.filter(t=>t.title.toLowerCase().includes(l.value.toLowerCase())):n.value));I(()=>l.value,()=>{i()});const P=t=>{b.value=t,i()},D=()=>{_.push({name:"lessonCreate"})};return M(async()=>{await i()}),(t,e)=>{const v=m("o-table-column"),N=m("o-table");return z(),O("div",G,[s("div",{class:"d-flex justify-content-between"},[H,s("button",{class:"p-1 btn btn-primary",onClick:D}," Create Lesson ")]),s("div",J,[R(s("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>l.value=o),class:"form-control form-control-sm",placeholder:"Search by Lesson Name"},null,512),[[q,l.value]])]),K,u(N,{data:L.value,loading:c.value,paginated:"","backend-pagination":"",total:p.value,"per-page":w(g),"backend-sorting":"","default-sort-direction":x.value,"default-sort":[f.value,h.value],"aria-next-label":"Next page","aria-previous-label":"Previous page","aria-page-label":"Page","aria-current-label":"Current page",onPageChange:P,onSort:y,hoverable:!0},{default:d(()=>[u(v,{field:"title",label:"Title",sortable:""},{default:d(o=>[C(S(o.row.title),1)]),_:1}),u(v,{field:"action",label:"Visible"},{default:d(o=>[C(S(o.row.isPublic?"Public":"Not Public"),1)]),_:1}),u(v,{field:"action",label:"View"},{default:d(o=>[s("button",{class:"btn btn-primary",onClick:E(Y=>w(_).push({name:"lessonDetail",params:{id:o.row._id}}),["prevent"])},"View Lesson",8,Q)]),_:1})]),_:1},8,["data","loading","total","per-page","default-sort-direction","default-sort"])])}}},ee=$(W,[["__scopeId","data-v-2578d388"]]);export{ee as default};
