import{_ as A,u as P,e as M,r as t,f as N,g as v,o as S,c as V,a,h as c,i as r,d as g,t as j,p as B,j as E}from"./index-B-03LEUy.js";const f=i=>(B("data-v-7c0fccb8"),i=i(),E(),i),G={class:"container border border-2 rounded-4 p-2"},U={class:"d-flex justify-content-between"},I=f(()=>a("h2",{class:"mt-2"},"Textbooks Table",-1)),z=f(()=>a("hr",null,null,-1)),F={class:"p-4 col-8 mx-auto"},O={__name:"TextbookView",setup(i){const k=P(),_=M(),n=t([]),b=t(0),u=t(!1);t("vote_count"),t("desc"),t("desc");const m=t(1),p=t(20),h=()=>{const e=[`perPage=${p.value}`,`page=${m.value}`].join("&");u.value=!0,fetch(`/api/textbooks/all?${e}`,{headers:{Authorization:`Bearer ${k.token}`}}).then(o=>o.json()).then(o=>{let s=o.total_pages;o.total_pages/p.value>100&&(s=p.value*100),b.value=s,n.value=o.textbooks.map(d=>d),n.value.length>10&&(n.value=n.value.slice(0,5)),u.value=!1}).catch(o=>{throw n.value=[],b.value=0,u.value=!1,o})},x=e=>{m.value=e,h()},C=()=>{let e="nonMD";console.log(`Go to Upload ${e}: `),_.push({name:"textbooks-upload",params:{type:e}})},T=()=>{let e="MD";console.log(`Go to Upload ${e}: `),_.push({name:"textbooks-upload",params:{type:e}})},y=e=>{console.log("Go to Annotate: "+e)},w=e=>{console.log("Go to Edit: "+e),_.push({name:"editor-detail",params:{type:"textbook",id:e}})};return N(()=>{h()}),(e,o)=>{const s=v("o-table-column"),d=v("o-button"),$=v("o-table");return S(),V("div",G,[a("div",U,[I,a("div",null,[a("button",{onClick:o[0]||(o[0]=l=>C()),class:"btn btn-primary"}," Create (PDF / DOCX) "),a("button",{onClick:o[1]||(o[1]=l=>T()),class:"btn btn-primary"}," Create (MD) ")])]),z,a("div",F,[a("section",null,[c($,{data:n.value,loading:u.value,paginated:"","backend-pagination":"",total:b.value,"per-page":p.value,"aria-next-label":"Next page","aria-previous-label":"Previous page","aria-page-label":"Page","aria-current-label":"Current page",onPageChange:x},{default:r(()=>[c(s,{field:"name",label:"Name"},{default:r(l=>[g(j(l.row.name),1)]),_:1}),c(s,{label:"Action",width:"30%"},{default:r(l=>[c(d,{variant:"primary",onClick:D=>y(l.row._id)},{default:r(()=>[g("Annotate")]),_:2},1032,["onClick"]),c(d,{variant:"primary",onClick:D=>w(l.row._id)},{default:r(()=>[g("Editor")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","loading","total","per-page"])])])])}}},X=A(O,[["__scopeId","data-v-7c0fccb8"]]);export{X as default};
