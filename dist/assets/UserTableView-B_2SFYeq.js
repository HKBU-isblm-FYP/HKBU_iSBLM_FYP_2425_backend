import{u as x,e as N,r as t,m as $,n as A,f as S,H as T,g as v,o as V,c as B,a as u,w as L,v as U,h as r,i as c,d as i,t as h,q as D}from"./index-B-03LEUy.js";const j={class:"container border border-2 rounded-4 p-2 shadow mt-2 home-card"},z=u("h3",{class:"mt-2"},[u("i",{class:"bi bi-people-fill me-2"}),i("Admin Users Table ")],-1),E={class:"form-group"},M=u("hr",null,null,-1),F={__name:"UserTableView",setup(q){const b=x().token,_=N(),l=t([]),m=t(0),d=t(!1);t("vote_count"),t("desc"),t("desc");const f=t(1),g=t(10),n=t(""),p=()=>{const a=[`search=${n.value}`,`perPage=${g.value}`,`page=${f.value}`].join("&");d.value=!0,fetch(`/api/users/all?${a}`,{headers:{Authorization:`Bearer ${b}`}}).then(e=>e.json()).then(e=>{console.log(e),m.value=e.size,l.value=e.users.map(s=>s),l.value.length>10&&(l.value=l.value.slice(0,5)),d.value=!1}).catch(e=>{throw l.value=[],m.value=0,d.value=!1,e})},w=a=>{f.value=a,p()},C=$(()=>n.value?l.value.filter(a=>a.name.toLowerCase().includes(n.value.toLowerCase())):l.value);A(()=>n.value,()=>{p()}),S(async()=>{document.body.classList.add("home-view"),console.log("Class added"),await p()}),T(()=>{document.body.classList.remove("home-view")});const P=a=>{console.log("Go to Profile: "+a),_.push({name:"user-detail",params:{id:a}})};return(a,e)=>{const s=v("o-table-column"),y=v("o-button"),k=v("o-table");return V(),B("div",j,[z,u("div",E,[L(u("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>n.value=o),class:"form-control form-control-sm",placeholder:"Search by Player Name"},null,512),[[U,n.value]])]),M,u("section",null,[r(k,{data:C.value,loading:d.value,paginated:"","backend-pagination":"",total:m.value,"per-page":g.value,"aria-next-label":"Next page","aria-previous-label":"Previous page","aria-page-label":"Page","aria-current-label":"Current page",onPageChange:w,hoverable:!0},{default:c(()=>[r(s,{field:"name",label:"Name"},{default:c(o=>[i(h(o.row.name),1)]),_:1}),r(s,{field:"email",label:"Email",width:"25%"},{default:c(o=>[i(h(o.row.email),1)]),_:1}),r(s,{field:"contact",label:"Contact"},{default:c(o=>[i(h(o.row.contactNo),1)]),_:1}),r(s,{label:"Action",width:"10%"},{default:c(o=>[r(y,{variant:"primary",onClick:H=>P(o.row._id,D(_))},{default:c(()=>[i("Profile")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","loading","total","per-page"])])])}}};export{F as default};
