import{_ as B,u as M,r as o,m as z,n as L,f as O,g as P,o as f,c as g,a as l,w as q,v as E,h as r,i as n,q as F,C as b,d as C,t as k,p as G,j as U}from"./index-B-03LEUy.js";const y=i=>(G("data-v-af157abc"),i=i(),U(),i),H={class:"container"},J=y(()=>l("h3",{class:"p-2"}," Admin Project Views ",-1)),K={class:"form-group"},Q=y(()=>l("hr",null,null,-1)),R={key:0},W={key:1},X=["onClick"],Y=["onClick"],Z={__name:"ProjectTableView",setup(i){const S=M().token,u=o([]),v=o(0),d=o(!1),h=o("vote_count"),m=o("desc"),V=o("desc");let w=o(1),j=o(6);o(0);const s=o(""),p=async()=>{const t=[`search=${s.value}`,`perPage=${j.value}`,`page=${w.value}`].join("&");d.value=!0,await fetch(`/api/projects/all?${t}`,{headers:{Authorization:`Bearer ${S}`}}).then(async e=>await e.json()).then(e=>{u.value=e.projects,v.value=e.size,d.value=!1,console.log(e)}).catch(e=>{throw u.value=[],v.value=0,d.value=!1,e})},x=(t,e)=>{h.value=t,m.value=e,p()},D=z(()=>s.value?u.value.filter(t=>t.title.toLowerCase().includes(s.value.toLowerCase())):u.value);L(()=>s.value,()=>{p()});const T=t=>{w.value=t,p()},$=(t,e)=>{console.log("Going to",t),console.log("Passing",e),b.push({name:"projectDetail",params:{id:t,project:e}})},I=()=>{b.push({name:"projectCreate"})},N=t=>{b.push({name:"projectView",params:{id:t}})};return O(async()=>{await p()}),(t,e)=>{const c=P("o-table-column"),A=P("o-table");return f(),g("div",H,[l("div",{class:"d-flex justify-content-between"},[J,l("button",{class:"p-1 btn btn-primary",onClick:I}," Create Project ")]),l("div",K,[q(l("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>s.value=a),class:"form-control form-control-sm",placeholder:"Search by Project Name"},null,512),[[E,s.value]])]),Q,r(A,{data:D.value,loading:d.value,paginated:"","backend-pagination":"",total:v.value,"per-page":F(j),"backend-sorting":"","default-sort-direction":V.value,"default-sort":[h.value,m.value],"aria-next-label":"Next page","aria-previous-label":"Previous page","aria-page-label":"Page","aria-current-label":"Current page",onPageChange:T,onSort:x,hoverable:!0},{default:n(()=>[r(c,{field:"title",label:"Project Title",sortable:""},{default:n(a=>[C(k(a.row.title),1)]),_:1}),r(c,{field:"progress",label:"Progress",sortable:""},{default:n(a=>[a.row.progress.every(_=>_.isCompleted)?(f(),g("div",R," Complete ")):(f(),g("div",W,"In Progress"))]),_:1}),r(c,{field:"title",label:"Project Members",sortable:""},{default:n(a=>[C(k(a.row.member.length),1)]),_:1}),r(c,{field:"action",label:"Detail"},{default:n(a=>[l("button",{class:"btn btn-primary",onClick:_=>$(a.row._id,a.row)},"Detail",8,X)]),_:1}),r(c,{field:"action",label:"View"},{default:n(a=>[l("button",{class:"btn btn-primary",onClick:_=>N(a.row._id,a.row)},"View Project",8,Y)]),_:1})]),_:1},8,["data","loading","total","per-page","default-sort-direction","default-sort"])])}}},ae=B(Z,[["__scopeId","data-v-af157abc"]]);export{ae as default};
